<html>
<head>
    <title>ç®¡ç†ä¿¡ç®±</title>
</head>
<body>
    <div class="container">
        <h1>ğŸ“¬ ç®¡ç†ä¿¡ä»¶</h1>
        <div id="login">
            <input type="password" id="password" placeholder="è¾“å…¥ç®¡ç†å‘˜å¯†ç " />
            <button onclick="checkPassword()">è¿›å…¥</button>
        </div>
        <div id="adminPanel" style="display:none;">
            <div id="letters"></div>
        </div>
    </div>

    <script>
        const ADMIN_PASSWORD = "123456";  // ç®¡ç†å‘˜å¯†ç 

        // æ ¡éªŒç®¡ç†å‘˜å¯†ç 
        function checkPassword() {
            const pwd = document.getElementById("password").value;
            if (pwd === ADMIN_PASSWORD) {
                document.getElementById("login").style.display = "none";
                document.getElementById("adminPanel").style.display = "block";
                loadLetters();  // åŠ è½½ä¿¡ä»¶
            } else {
                alert("å¯†ç é”™è¯¯ï¼");
            }
        }

        // åŠ è½½ä¿¡ä»¶
        function loadLetters() {
            const letters = JSON.parse(localStorage.getItem('letters') || '[]');
            const box = document.getElementById("letters");
            box.innerHTML = "";
            letters.forEach((letter, index) => {
                // è§£ç å›å¤å†…å®¹
                const decodedReply = letter.reply ? decodeURIComponent(letter.reply) : "ç­‰å¾…å›å¤...";

                box.innerHTML += `
                    <div class="letter">
                        <p><strong>ğŸ“ ä¿¡ä»¶ ${index + 1}</strong> (${letter.time})</p>
                        <p>${letter.message}</p>
                        <p><strong>å›å¤ï¼š</strong> ${decodedReply}</p>
                        <textarea id="reply${index}" placeholder="å†™ä¸€æ®µå›å¤...">${decodedReply}</textarea>
                        <button onclick="saveReply(${index})">ä¿å­˜å›å¤</button>
                        <hr />
                    </div>
                `;
            });
        }

        // ä¿å­˜å›å¤
        function saveReply(index) {
            const letters = JSON.parse(localStorage.getItem('letters') || '[]');
            const replyText = document.getElementById(`reply${index}`).value;

            // ç¼–ç å›å¤å†…å®¹ä»¥é¿å…ç‰¹æ®Šå­—ç¬¦å¯¼è‡´é—®é¢˜
            letters[index].reply = encodeURIComponent(replyText);

            localStorage.setItem('letters', JSON.stringify(letters));
            alert("å›å¤å·²ä¿å­˜ï¼");
        }
    </script>
</body>
</html>
